version: '3.7'
services:
    api:
        build: .
        command: npm run dev
        volumes:
            - backend:/usr/app/
        ports:
            - '3000:3000'
        links:
            - nats
        depends_on:
            - nats
        environment:
            NODE_ENV: development
    nats:
        image: 'nats:2.1.9'
        #    entrypoint: "/gnatsd -DV"
        #    entrypoint: "/nats-server -p 4222 -m 8888 "
        expose:
            - '4222'
        ports:
            - '8222:8222'
        hostname: nats-server
volumes:
  backend:
